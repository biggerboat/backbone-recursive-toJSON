/*! backbone-recursive-tojson - v0.1.1 - 2015-07-28
* Copyright (c) 2015 Paul Tondeur; 
*/
(function(e,o){if("function"==typeof define&&define.amd)define(["underscore","backbone"],function(e,t){o(e,t)});else if("undefined"!=typeof exports&&"function"==typeof require){var t=require("underscore"),n=require("backbone");o(t,n)}else o(e._,e.Backbone)})(this,function(e,o){var t=o.Model.prototype.toJSON;e.extend(o.Model.prototype,{_superToJSON:null,toJSON:function(){var o,t=this._superToJSON();for(var n in t)if(t.hasOwnProperty(n)&&!e.isEmpty(t[n]))if("function"==typeof t[n].toJSON)t[n]=t[n].toJSON();else if(e.isArray(t[n])){o=[];for(var r=0;t[n].length>r;r++)e.isEmpty(t[n][r])||"function"!=typeof t[n][r].toJSON?o.push(t[n][r]):o.push(t[n][r].toJSON());t[n]=o}return t}}),o.Model.prototype._superToJSON=t});